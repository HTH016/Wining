{% extends "search/base.html" %} 
{% load search_index %}
{% load mathfilters %}
{% load static %}



<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title> '와인 이름' 검색 결과 </title>
		<!-- ♠ bootstrap 적용 -->
		<script src="{% static 'js/jquery-3.6.4.js'%}"></script>
		<script src="{% static 'js/script_search.js'%}"></script>
	</head>
	<body>
		{% block title %} 
			<h2 align="center"> Wining </h2> 
		{% endblock %}
	<br><br>						
		{% block select %}								<!-- 검색 방법 선택 -->
		
		<a href="/search/main">
			<div>
				검색어 검색 
			</div>
		</a>
		<a href="/search/searchbycategory">
			<div>
				카테고리 검색 
			</div>
		</a>
		{% if request.session.memid %}
		<a href="/search/searchbyuser">
			<div>
				추천 검색 
			</div>
		</a>
		{% else %}
		
		{% endif %}
		<a href="/search/searchbyrank">
			<div>
				순위별 검색 
			</div>
		</a>
		{% endblock %}
		<br><br>
		
	{% block input %}								<!-- 검색 입력 창 -->
		
			{% csrf_token %}
			<form method="post" action="searchbynamelist" name="searchbyname">				<!-- 검색어 입력하고 submit 하면 "http://localhost:8000/search/searchbynamelist" -->
				
				
				<div style="text-align:center">
					<select name="namelanguage">
						<option value="winenamekor"> 한국어 </option> 
						<option value="winenameeng"> 영문이름 </option>
					</select> 
					<input class="input" type="text" name="searchname" maxlength="100"
						style="width:400px; height:30px"  autofocus>	
					<input class="inputbutton" type="submit" value="검색">	
				</div>
			</form>
			
		
		{% endblock %}	
	<br><br>
	
			
	{% block list %}											<!-- 검색 결과 리스트 출력 -->
	전체 결과 수 : {{ results_count }}	<br>									<!-- 전체 결과 수 출력 -->

		{% if results_count == 0 %}										<!-- 검색 결과 유무에 따라 나눈다 -->
				검색 결과가 없습니다
		{% else %}
				'{{ search_word }}' 에 대한 검색 결과
			<br><br>
			<input type="hidden" id="searchstart" value="{{search_word}}">
			
			{% for start_result in start_results %}								<!-- 검색 결과가 있다면 반복문으로 나타낸다 -->

				<a href="/detail/winedetail?wine_id={{ start_result.wine_id }}">
					<div align="center" style="width:60%; height: 150px; border: 5px solid rgb(170, 0, 4); border-radius: 2em;">	    	<!-- 리스트 요소는 <div> 태그로 나타내고 <div> 영역 안에 image, 이름이 있다 -->
				 		<div align="left" ><img src="../{{ start_result.wine_image.url }}" width="90" height="120"> </div>
						<div id="{start_result.wine_id}}" style="text-align:left"> {{ start_result.wine_name }}
						<br> {{ start_result.wine_name_eng }} </div>
					</div>
				</a>
				<br><br>
			{% endfor %}
			
			{% for include_result in include_results %}								<!-- 검색 결과가 있다면 반복문으로 나타낸다 -->

				<a href="/detail/winedetail?wine_id={{ include_result.wine_id }}">
					<div align="center" style="width:60%; height: 150px; border: 5px solid rgb(255, 136, 139); border-radius: 2em;">	    	<!-- 리스트 요소는 <div> 태그로 나타내고 <div> 영역 안에 image, 이름이 있다 -->
				 		<div align="left" ><img src="../{{ include_result.wine_image.url }}" width="90" height="120"> </div>
						<div id="{include_result.wine_id}}" style="text-align:left"> {{ include_result.wine_name }} 
						<br> {{ include_result.wine_name_eng }} </div>
					</div>
				</a>
				<br><br>
			{% endfor %}
			
		{% endif %}
		
		<style>
		.highlight { background-color:#394982; color:#709482 }
		</style>
		
		 
		<script type="text/javascript">
		$('#{{searchstart}}').ready(function () {
		    var searchStart = $('#searchstart').val();
		    $("#{{include_result.wine_id}}:contains('"+searchStart+"')").each(function () {
		        var regex = new RegExp(searchStart,'gi');
		        $(this).html( $(this).text().replace(regex, "<span class='txt-hlight'>"+searchStart+"</span>") );
		    });
		});
		</script>
	
	{% endblock %}
		
	
	
	</body>
</html>





<!--  
{% for dto_res in sorted_wine_id %}								

	
				<a href="../detail/winedetail?wine_id={{i}}">
					<div align="center" style="width:60%; height: 100px; border: 5px solid red; border-radius: 2em;">													
				 		<div align="left" ><img src="{{ list_wine_image.i }}" width="50" height="50"> </div>
						<div style="text-align:left"> {{list_wine_name.i }} </div>
					</div>
				</a>
				<br><br>
			{% endfor %}
			
-->